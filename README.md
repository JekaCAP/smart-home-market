# Smart Home Technologies Platform

**Проект:** Система умного дома + интернет-магазин для продажи устройств Smart Home Technologies

## Описание
Платформа для управления устройствами умного дома и анализа их телеметрии. Позволяет собирать данные с датчиков, агрегировать их, проверять условия сценариев и запускать соответствующие действия. Интернет-магазин поддерживает витрину товаров, корзину, склад, заказы, оплату и доставку.

---

## Функционал

### Система умного дома
- Прием данных с хаба и датчиков (температура, движение, освещённость, розетки, выключатели)
- Агрегация данных по хабу
- Проверка условий сценариев и запуск команд
- Настройка сценариев автоматизации (условия + действия)
- Подключение устройств через Zigbee, хаб с веб-интерфейсом

### Интернет-магазин
- Витрина товаров (`shopping-store`)
- Корзина пользователей (`shopping-cart`)
- Управление заказами (`order`)
- Склад (`warehouse`)
- Оплата заказов (`payment`)
- Доставка (`delivery`)

---

## Архитектура и взаимодействие

### Система умного дома
1. **Hub router** — преобразует данные хабов в формат для системы
2. **Collector** — принимает данные, преобразует в Apache Avro и отправляет в Kafka
3. **Aggregator** — агрегирует данные по хабу и записывает в Kafka
4. **Analyzer** — проверяет условия сценариев и отправляет команды в Hub router

### Интернет-магазин
- Микросервисы взаимодействуют через REST
- Каждый сервис работает со своей схемой БД (Database per Service)
- Используются паттерны Spring Cloud: Config, Eureka, Feign, Circuit Breaker

---

## Технологии
- **Языки:** Java 21
- **Фреймворки:** Spring Boot 3, Spring Cloud, Hibernate, Swagger/OpenAPI
- **Интеграции:** Kafka, gRPC, REST
- **Базы данных:** PostgreSQL, Flyway
- **Тестирование:** JUnit, Mockito
- **Инфраструктура:** Docker, GitHub Actions (CI/CD)

---

## Запуск

1. **Клонировать репозиторий:**
   ```bash
   git clone <REPO_URL>

2. Перейти в директорию сервиса и собрать проект:
cd collector
./mvnw clean install


3. Запустить Docker-контейнеры:
 Copydocker-compose up


4. Настроить переменные окружения и подключение к PostgreSQL и Kafka


5. Запустить все сервисы

### Структура проекта
- collector/Прием и отправка телеметрии
- aggregator/Агрегирование данных
- analyzer/Проверка сценариев и запуск команд
- shopping-store/Витрина товаров
- shopping-cart/Корзина пользователей
- warehouse/Управление складом
- order/Обработка заказов
- payment/Оплата заказов
- delivery/Доставка

### Цели проекта

- Демонстрация микросервисной архитектуры
- Обработка и агрегация IoT-данных
- Реализация сценариев умного дома
- Построение интернет-магазина с отдельными сервисами и изолированными БД
